<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- 头部元信息保持不变，新增字体和图标 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* 新增视觉增强样式 */
        
        /* 动态渐变背景 */
        .header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 40%;
            background: linear-gradient(45deg, #88c0d055 0%, #81a1c155 100%);
            z-index: -1;
        }

        /* 粒子动画效果 */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: -1;
        }

        /* 卡片悬浮效果增强 */
        .article-card {
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .article-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                45deg,
                transparent 25%,
                rgba(136, 192, 208, 0.1) 50%,
                transparent 75%
            );
            transform: rotate(45deg);
            opacity: 0;
            transition: opacity 0.5s;
        }

        .article-card:hover::before {
            opacity: 1;
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { transform: rotate(45deg) translateX(-100%); }
            100% { transform: rotate(45deg) translateX(100%); }
        }

        /* 标签动态效果 */
        .tag {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .tag::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent 0%,
                rgba(255,255,255,0.3) 50%,
                transparent 100%
            );
            transition: left 0.5s;
        }

        .tag:hover::after {
            left: 100%;
        }

        /* 统计卡片3D效果 */
        .stat-item {
            perspective: 1000px;
        }

        .stat-item-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
        }

        .stat-item:hover .stat-item-inner {
            transform: rotateY(180deg);
        }

        /* 新增时间线样式 */
        .timeline {
            position: relative;
            padding: 2rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            width: 2px;
            height: 100%;
            background: var(--accent-color);
        }

        /* 新增加载动画 */
        .loader {
            animation: spin 1s linear infinite;
            border: 3px solid var(--secondary-color);
            border-top-color: var(--accent-color);
            border-radius: 50%;
            width: 24px;
            height: 24px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- 新增粒子动画容器 -->
    <canvas class="particles"></canvas>

    <!-- 增强版头部 -->
    <header class="header">
        <div class="avatar"></div>
        <h1>AkinRain</h1>
        <div class="social-links">
            <a href="mailto:570848069@qq.com" class="social-icon">
                <i class="fas fa-envelope"></i>
            </a>
            <a href="https://github.com/AkinRain5828258" class="social-icon">
                <i class="fab fa-github"></i>
            </a>
        </div>
    </header>

    <!-- 新增分类导航 -->
    <nav class="category-nav">
        <div class="category-tags">
            <button class="category-tag active" data-category="all">全部</button>
            <button class="category-tag" data-category="tech">技术</button>
            <button class="category-tag" data-category="life">生活</button>
        </div>
    </nav>

    <!-- 其他原有结构保持不变 -->

    <script>
        // 新增粒子系统
        class ParticleSystem {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.particles = [];
                this.resize();
                window.addEventListener('resize', () => this.resize());
            }

            resize() {
                this.width = this.canvas.width = window.innerWidth;
                this.height = this.canvas.height = window.innerHeight;
            }

            // 粒子动画逻辑...
        }

        // 增强版初始化函数
        function initBlog() {
            // 初始化粒子系统
            const canvas = document.querySelector('.particles');
            new ParticleSystem(canvas);

            // 动态加载文章
            setTimeout(() => {
                articles.forEach(article => {
                    // 增强版卡片生成逻辑
                    const card = createArticleCard(article);
                    applyCardEffects(card);
                });
                
                // 初始化分类过滤
                initCategoryFilter();
                
                // 初始化滚动动画
                initScrollAnimations();
            }, 500);
        }

        // 新增卡片特效函数
        function applyCardEffects(card) {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                card.style.transform = `
                    perspective(1000px)
                    rotateX(${(y - rect.height/2) / 20}deg)
                    rotateY(${-(x - rect.width/2) / 20}deg)
                `;
            });

            card.addEventListener('mouseleave', () => {
                card.style.transform = 'none';
            });
        }

        // 其他增强功能...
    </script>
</body>
</html>
        .comments {
            margin-top: 1em;
        }

        .comment {
            border-top: 1px solid #eee;
            padding: 0.5em 0;
        }

        .comment input, .comment textarea {
            display: block;
            width: 100%;
            margin: 0.5em 0;
            padding: 0.5em;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .like-button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 0.5em 1em;
            cursor: pointer;
            border-radius: 5px;
        }

        .like-button.liked {
            background-color: #28a745;
        }

        .pagination {
            display: flex;
            justify-content: center;
            margin: 2em 0;
        }

        .pagination button {
            padding: 0.5em 1em;
            margin: 0 0.5em;
            cursor: pointer;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <header>
        <h1>个人博客</h1>
        <button class="toggle-mode" onclick="toggleMode()">切换模式</button>
    </header>
    <div class="container">
        <div class="search">
            <input type="text" id="search" placeholder="搜索文章..." oninput="searchPosts()">
        </div>
        <div class="create-post">
            <h2>创建文章</h2>
            <input type="text" id="new-post-title" placeholder="文章标题">
            <textarea id="new-post-content" placeholder="文章内容"></textarea>
            <input type="text" id="new-post-tags" placeholder="文章标签（用逗号分隔）">
            <button onclick="createPost()">创建</button>
        </div>
        <div class="tags">
            <span onclick="filterByTag('all')">所有</span>
            <!-- 动态生成标签 -->
        </div>
        <div class="posts">
            <!-- Posts will be dynamically added here -->
        </div>
        <div class="edit-post" style="display: none;">
            <h2>编辑文章</h2>
            <input type="text" id="edit-post-title" placeholder="文章标题">
            <textarea id="edit-post-content" placeholder="文章内容"></textarea>
            <input type="text" id="edit-post-tags" placeholder="文章标签（用逗号分隔）">
            <button onclick="savePost()">保存</button>
        </div>
        <div class="stats">
            <p>文章总数: <span id="total-posts">0</span></p>
            <p>总字数: <span id="total-words">0</span></p>
        </div>
        <div class="pagination">
            <button onclick="prevPage()">上一页</button>
            <span id="page-info">第 1 页</span>
            <button onclick="nextPage()">下一页</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        function toggleMode() {
            document.body.classList.toggle('dark-mode');
        }

        let posts = [
            {
                id: 1,
                title: "First Post",
                content: "This is the content of the first post.",
                tags: ["example", "first"],
                comments: [
                    { author: "User1", text: "Great post!", likes: 0 },
                    { author: "User2", text: "Thanks for sharing.", likes: 0 }
                ]
            },
            {
                id: 2,
                title: "Second Post",
                content: "This is the content of the second post.",
                tags: ["example", "second"],
                comments: []
            }
        ];

        let nextPostId = 3;
        let tags = [];
        let currentTag = 'all';

        function createPost() {
            const title = document.getElementById('new-post-title').value;
            const content = document.getElementById('new-post-content').value;
            const tagsInput = document.getElementById('new-post-tags').value;
            const postTags = tagsInput.split(',').map(tag => tag.trim()).filter(tag => tag);
            if (title && content) {
                posts.push({
                    id: nextPostId++,
                    title,
                    content,
                    tags: postTags,
                    comments: []
                });
                updateTags();
                renderPosts();
                document.getElementById('new-post-title').value = '';
                document.getElementById('new-post-content').value = '';
                document.getElementById('new-post-tags').value = '';
            } else {
                alert('标题和内容不能为空');
            }
        }

        function updateTags() {
            tags = posts.reduce((acc, post) => {
                post.tags.forEach(tag => {
                    if (!acc.includes(tag)) {
                        acc.push(tag);
                    }
                });
                return acc;
            }, []);
            renderTags();
        }

        function renderTags() {
            const tagsContainer = document.querySelector('.tags');
            tagsContainer.innerHTML = '<span onclick="filterByTag(\'all\')">所有</span>';
            tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.innerText = tag;
                tagElement.onclick = () => filterByTag(tag);
                tagsContainer.appendChild(tagElement);
            });
        }

        function filterByTag(tag) {
            currentTag = tag;
            renderPosts();
        }

        function searchPosts() {
            const query = document.getElementById('search').value.toLowerCase();
            renderPosts(query);
        }

        function renderPosts(query = '') {
            const postsContainer = document.querySelector('.posts');
            postsContainer.innerHTML = '';
            posts.filter(post => {
                return (currentTag === 'all' || post.tags.includes(currentTag)) &&
                    (post.title.toLowerCase().includes(query) || post.content.toLowerCase().includes(query));
            }).forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'post';
                postElement.innerHTML = `
                    <h2 class="post-title">${post.title}</h2>
                    <div class="post-content">
                        ${marked(post.content)}
                    </div>
                    <div class="post-actions">
                        <button onclick="editPost(${post.id})">编辑</button>
                        <button onclick="deletePost(${post.id})">删除</button>
                    </div>
                    <div class="comments">
                        <h3>评论</h3>
                        ${post.comments.map(comment => `
                            <div class="comment">
                                <p><strong>${comment.author}</strong></p>
                                <p>${comment.text}</p>
                                <button class="like-button" onclick="likeComment(${post.id}, ${post.comments.indexOf(comment)})">点赞 (${comment.likes})</button>
                            </div>
                        `).join('')}
                        <div class="add-comment">
                            <input type="text" placeholder="你的名字" id="comment-author-${post.id}">
                            <textarea placeholder="你的评论" id="comment-text-${post.id}"></textarea>
                            <button onclick="addComment(${post.id})">添加评论</button>
                        </div>
                    </div>
                `;
                postsContainer.appendChild(postElement);
            });
            updateStats();
        }

        function editPost(id) {
            const post = posts.find(p => p.id === id);
            if (post) {
                document.querySelector('.edit-post').style.display = 'block';
                document.getElementById('edit-post-title').value = post.title;
                document.getElementById('edit-post-content').value = post.content;
                document.getElementById('edit-post-tags').value = post.tags.join(', ');
                document.querySelector('.edit-post').dataset.id = id;
            }
        }

        function savePost() {
            const id = parseInt(document.querySelector('.edit-post').dataset.id, 10);
            const title = document.getElementById('edit-post-title').value;
            const content = document.getElementById('edit-post-content').value;
            const tagsInput = document.getElementById('edit-post-tags').value;
            const postTags = tagsInput.split(',').map(tag => tag.trim()).filter(tag => tag);
            const postIndex = posts.findIndex(p => p.id === id);
            if (postIndex > -1) {
                posts[postIndex].title = title;
                posts[postIndex].content = content;
                posts[postIndex].tags = postTags;
                renderPosts();
                document.querySelector('.edit-post').style.display = 'none';
            }
        }

        function deletePost(id) {
            posts = posts.filter(p => p.id !== id);
            renderPosts();
        }

        function addComment(postId) {
            const author = document.getElementById(`comment-author-${postId}`).value;
            const text = document.getElementById(`comment-text-${postId}`).value;
            if (author && text) {
                const postIndex = posts.findIndex(p => p.id === postId);
                if (postIndex > -1) {
                    posts[postIndex].comments.push({ author, text, likes: 0 });
                    renderPosts();
                }
            } else {
                alert('名字和评论不能为空');
            }
        }

        function likeComment(postId, commentIndex) {
            const postIndex = posts.findIndex(p => p.id === postId);
            if (postIndex > -1) {
                posts[postIndex].comments[commentIndex].likes++;
                renderPosts();
            }
        }

        function updateStats() {
            const totalPosts = posts.length;
            const totalWords = posts.reduce((acc, post) => acc + post.content.split(' ').length, 0);
            document.getElementById('total-posts').innerText = totalPosts;
            document.getElementById('total-words').innerText = totalWords;
        }

        updateTags();
        renderPosts();
    </script>
</body>
</html>
        .comments {
            margin-top: 1em;
        }

        .comment {
            border-top: 1px solid #eee;
            padding: 0.5em 0;
        }

        .comment input, .comment textarea {
            display: block;
            width: 100%;
            margin: 0.5em 0;
            padding: 0.5em;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .like-button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 0.5em 1em;
            cursor: pointer;
            border-radius: 5px;
        }

        .like-button.liked {
            background-color: #28a745;
        }

        .pagination {
            display: flex;
            justify-content: center;
            margin: 2em 0;
        }

        .pagination button {
            padding: 0.5em 1em;
            margin: 0 0.5em;
            cursor: pointer;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .auth {
            text-align: center;
            margin: 2em 0;
        }

        .auth input {
            display: block;
            width: 100%;
            margin: 0.5em 0;
            padding: 0.5em;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .auth button {
            padding: 0.5em 1em;
            margin: 0.5em;
            cursor: pointer;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <header>
        <h1>个人博客</h1>
        <button class="toggle-mode" onclick="toggleMode()">切换模式</button>
    </header>
    <div class="container">
        <div class="auth">
            <h2>注册</h2>
            <input type="text" id="register-username" placeholder="用户名">
            <input type="password" id="register-password" placeholder="密码">
            <button onclick="register()">注册</button>
            <h2>登录</h2>
            <input type="text" id="login-username" placeholder="用户名">
            <input type="password" id="login-password" placeholder="密码">
            <button onclick="login()">登录</button>
        </div>
        <div class="profile" style="display: none;">
            <img src="data:image/png;base64, " alt="Profile Picture" id="profile-pic">
            <p id="profile-nickname">昵称: </p>
            <p id="profile-email">Email: </p>
            <p id="profile-github">GitHub: </p>
            <p id="profile-minecraft">Minecraft: </p>
        </div>
        <div class="search" style="display: none;">
            <input type="text" id="search" placeholder="搜索文章..." oninput="searchPosts()">
        </div>
        <div class="create-post" style="display: none;">
            <h2>创建文章</h2>
            <input type="text" id="new-post-title" placeholder="文章标题">
            <textarea id="new-post-content" placeholder="文章内容"></textarea>
            <input type="text" id="new-post-tags" placeholder="文章标签（用逗号分隔）">
            <button onclick="createPost()">创建</button>
        </div>
        <div class="tags" style="display: none;">
            <span onclick="filterByTag('all')">所有</span>
            <!-- 动态生成标签 -->
        </div>
        <div class="posts" style="display: none;">
            <!-- Posts will be dynamically added here -->
        </div>
        <div class="edit-post" style="display: none;">
            <h2>编辑文章</h2>
            <input type="text" id="edit-post-title" placeholder="文章标题">
            <textarea id="edit-post-content" placeholder="文章内容"></textarea>
            <input type="text" id="edit-post-tags" placeholder="文章标签（用逗号分隔）">
            <button onclick="savePost()">保存</button>
        </div>
        <div class="stats" style="display: none;">
            <p>文章总数: <span id="total-posts">0</span></p>
            <p>总字数: <span id="total-words">0</span></p>
        </div>
        <div class="pagination" style="display: none;">
            <button onclick="prevPage()">上一页</button>
            <span id="page-info">第 1 页</span>
            <button onclick="nextPage()">下一页</button>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        function toggleMode() {
            document.body.classList.toggle('dark-mode');
        }

        const base64Image = "BASE64_ENCODED_IMAGE_STRING";
        document.getElementById('profile-pic').src = base64Image;

        let users = [];
        let currentUser = null;

        let posts = [
            {
                id: 1,
                title: "First Post",
                content: "This is the content of the first post.",
                tags: ["example", "first"],
                comments: [
                    { author: "User1", text: "Great post!", likes: 0 },
                    { author: "User2", text: "Thanks for sharing.", likes: 0 }
                ]
            },
            {
                id: 2,
                title: "Second Post",
                content: "This is the content of the second post.",
                tags: ["example", "second"],
                comments: []
            }
        ];

        let nextPostId = 3;
        let tags = [];
        let currentTag = 'all';

        function register() {
            const username = document.getElementById('register-username').value;
            const password = document.getElementById('register-password').value;
            if (username && password) {
                if (!users.some(user => user.username === username)) {
                    users.push({ username, password });
                    alert('注册成功');
                } else {
                    alert('用户名已存在');
                }
            } else {
                alert('用户名和密码不能为空');
            }
        }

        function login() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            const user = users.find(user => user.username === username && user.password === password);
            if (user) {
                currentUser = user;
                document.querySelector('.auth').style.display = 'none';
                document.querySelector('.profile').style.display = 'block';
                document.querySelector('.search').style.display = 'block';
                document.querySelector('.create-post').style.display = 'block';
                document.querySelector('.tags').style.display = 'block';
                document.querySelector('.posts').style.display = 'block';
                document.querySelector('.edit-post').style.display = 'none';
                document.querySelector('.stats').style.display = 'block';
                document.querySelector('.pagination').style.display = 'block';
            } else {
                alert('用户名或密码错误');
            }
        }

        function createPost() {
            const title = document.getElementById('new-post-title').value;
            const content = document.getElementById('new-post-content').value;
            const tagsInput = document.getElementById('new-post-tags').value;
            const postTags = tagsInput.split(',').map(tag => tag.trim()).filter(tag => tag);
            if (title && content) {
                posts.push({
                    id: nextPostId++,
                    title,
                    content,
                    tags: postTags,
                    comments: []
                });
                updateTags();
                renderPosts();
                document.getElementById('new-post-title').value = '';
                document.getElementById('new-post-content').value = '';
                document.getElementById('new-post-tags').value = '';
            } else {
                alert('标题和内容不能为空');
            }
        }

        function updateTags() {
            tags = posts.reduce((acc, post) => {
                post.tags.forEach(tag => {
                    if (!acc.includes(tag)) {
                        acc.push(tag);
                    }
                });
                return acc;
            }, []);
            renderTags();
        }

        function renderTags() {
            const tagsContainer = document.querySelector('.tags');
            tagsContainer.innerHTML = '<span onclick="filterByTag(\'all\')">所有</span>';
            tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.innerText = tag;
                tagElement.onclick = () => filterByTag(tag);
                tagsContainer.appendChild(tagElement);
            });
        }

        function filterByTag(tag) {
            currentTag = tag;
            renderPosts();
        }

        function searchPosts() {
            const query = document.getElementById('search').value.toLowerCase();
            renderPosts(query);
        }

        function renderPosts(query = '') {
            const postsContainer = document.querySelector('.posts');
            postsContainer.innerHTML = '';
            posts.filter(post => {
                return (currentTag === 'all' || post.tags.includes(currentTag)) &&
                    (post.title.toLowerCase().includes(query) || post.content.toLowerCase().includes(query));
            }).forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'post';
                postElement.innerHTML = `
                    <h2 class="post-title">${post.title}</h2>
                    <div class="post-content">
                        ${marked(post.content)}
                    </div>
                    <div class="post-actions">
                        <button onclick="editPost(${post.id})">编辑</button>
                        <button onclick="deletePost(${post.id})">删除</button>
                    </div>
                    <div class="comments">
                        <h3>评论</h3>
                        ${post.comments.map(comment => `
                            <div class="comment">
                                <p><strong>${comment.author}</strong></p>
                                <p>${comment.text}</p>
                                <button class="like-button" onclick="likeComment(${post.id}, ${post.comments.indexOf(comment)})">点赞 (${comment.likes})</button>
                            </div>
                        `).join('')}
                        <div class="add-comment">
                            <input type="text" placeholder="你的名字" id="comment-author-${post.id}">
                            <textarea placeholder="你的评论" id="comment-text-${post.id}"></textarea>
                            <button onclick="addComment(${post.id})">添加评论</button>
                        </div>
                    </div>
                `;
                postsContainer.appendChild(postElement);
            });
            updateStats();
        }

        function editPost(id) {
            const post = posts.find(p => p.id === id);
            if (post) {
                document.querySelector('.edit-post').style.display = 'block';
                document.getElementById('edit-post-title').value = post.title;
                document.getElementById('edit-post-content').value = post.content;
                document.getElementById('edit-post-tags').value = post.tags.join(', ');
                document.querySelector('.edit-post').dataset.id = id;
            }
        }

        function savePost() {
            const id = parseInt(document.querySelector('.edit-post').dataset.id, 10);
            const title = document.getElementById('edit-post-title').value;
            const content = document.getElementById('edit-post-content').value;
            const tagsInput = document.getElementById('edit-post-tags').value;
            const postTags = tagsInput.split(',').map(tag => tag.trim()).filter(tag => tag);
            const postIndex = posts.findIndex(p => p.id === id);
            if (postIndex > -1) {
                posts[postIndex].title = title;
                posts[postIndex].content = content;
                posts[postIndex].tags = postTags;
                renderPosts();
                document.querySelector('.edit-post').style.display = 'none';
            }
        }

        function deletePost(id) {
            posts = posts.filter(p => p.id !== id);
            renderPosts();
        }

        function addComment(postId) {
            const author = document.getElementById(`comment-author-${postId}`).value;
            const text = document.getElementById(`comment-text-${postId}`).value;
            if (author && text) {
                const postIndex = posts.findIndex(p => p.id === postId);
                if (postIndex > -1) {
                    posts[postIndex].comments.push({ author, text, likes: 0 });
                    renderPosts();
                }
            } else {
                alert('名字和评论不能为空');
            }
        }

        function likeComment(postId, commentIndex) {
            const postIndex = posts.findIndex(p => p.id === postId);
            if (postIndex > -1) {
                posts[postIndex].comments[commentIndex].likes++;
                renderPosts();
            }
        }

        function updateStats() {
            const totalPosts = posts.length;
            const totalWords = posts.reduce((acc, post) => acc + post.content.split(' ').length, 0);
            document.getElementById('total-posts').innerText = totalPosts;
            document.getElementById('total-words').innerText = totalWords;
        }

        updateTags();
        renderPosts();
    </script>
</body>
</html>
